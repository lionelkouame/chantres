# ADR-003 â€“ Indexing and ReadModel

**Status**: Accepted
**Date**: 2025-05-08

## Context

In our CQRS (Command Query Responsibility Segregation) architecture, commands modify the state via aggregates, and reads are served by projections derived from the event history (Event Sourcing). The choir management project involves many dynamic queries: filters, sorting, full-text search on songs, members, activities, and past performances.

## Decision

All Read Models in the project will be managed via **OpenSearch**. Projections will be created and synchronized from domain events and stored in OpenSearch indexes, which can be queried via the API.

## Justifications

* ðŸ” **Excellent search capabilities**: full-text, analyzers, filters, aggregations, relevance, etc.
* âš¡ **Read performance**: optimized for fast response times, even with large volumes.
* ðŸ” **Alignment with Event Sourcing**: asynchronous projection of events onto OpenSearch documents.
* ðŸ“Š **Exploration and monitoring**: via OpenSearch Dashboards, for activity analysis or projection verification.
* âš™ï¸ **Easy integration**: REST/JSON querying compatible with modern frontends.

## Consequences

* ðŸ“¥ Each significant event must be projected to a specific OpenSearch index.
* ðŸ§ª Tests must simulate or control the state of the indexes.
* ðŸ”„ Projection regeneration must be automatable (event replay).
* ðŸ› ï¸ Tools for monitoring synchronization (events -> indexes) must be in place.
* ðŸ§° The team must master the OpenSearch DSL and its indexing/refresh mechanisms.

## Alternatives considered

* PostgreSQL with JSONB: simpler but less performant for text search.
* MongoDB: also offers document querying capabilities but is less specialized in full-text search.

---

Future Read Models must be declared with their event source and indexing schema.
